
<!DOCTYPE html>
<html>
<head>
  <title>Secure Workspace Launcher</title>
</head>
<body>
  <h1>Dev Platform 🚀</h1>
  <a href="http://localhost:8000/login"><button>🔐 Login with GitHub</button></a>
  <hr/>
  <form id="workspaceForm">
    <input type="text" id="repo" placeholder="GitHub Repo URL" required><br>
    <input type="text" id="language" placeholder="Language (e.g. node)" required><br>
    <input type="text" id="username" placeholder="Your Username" required><br>
    <button type="submit">Launch Workspace</button>
  </form>
  <div id="result"></div>
  <script>
    const form = document.getElementById("workspaceForm");
    const result = document.getElementById("result");
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const repo = document.getElementById("repo").value;
      const language = document.getElementById("language").value;
      const username = document.getElementById("username").value;
      const res = await fetch("http://localhost:8000/start-workspace", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ repo, language, username }),
      });
      const data = await res.json();
      result.innerHTML = `<strong>Workspace Created:</strong> <a href="${data.url}" target="_blank">${data.url}</a>`;
    });
  </script>
</body>
</html>
